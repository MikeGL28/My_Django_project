{% extends "base.html" %}
{% block title %}Добавить игру{% endblock %}

{% block body %}
<div class="container mt-5">
  <div class="card shadow-sm p-4 mb-5 bg-white rounded">
    <h1 class="mb-4">Добавить игру ⛹‍♂️</h1>

    <form method="post">
      {% csrf_token %}

      <div class="row g-3 mb-4">
        <div class="col-md-6">
          <label for="{{ form.date.id_for_label }}" class="form-label">{{ form.date.label }}</label>
          <input type="date"
                 name="date"
                 id="id_date"
                 class="form-control"
                 required
                 value="{{ form.date.value|default_if_none:'' }}">
        </div>

        <div class="col-md-6">
          <label for="{{ form.two_pointers.id_for_label }}" class="form-label">{{ form.two_pointers.label }}</label>
          <input type="number"
                 name="two_pointers"
                 id="id_two_pointers"
                 class="form-control"
                 min="0"
                 placeholder="Например: 45"
                 value="{{ form.two_pointers.value|default_if_none:0 }}">
        </div>

        <div class="col-md-6">
          <label for="{{ form.three_pointers.id_for_label }}" class="form-label">{{ form.three_pointers.label }}</label>
          <input type="number"
                 name="three_pointers"
                 id="id_three_pointers"
                 class="form-control"
                 min="0"
                 placeholder="Например: 20"
                 value="{{ form.three_pointers.value|default_if_none:0 }}">
        </div>
      </div>

      <h3 class="mt-4 mb-3">Выберите игроков:</h3>
      <div class="row">
        {% for player in all_players %}
          <div class="col-md-6 mb-3">
            <div class="card p-3 border rounded">
              <div class="form-check">
                <input type="checkbox" name="players" value="{{ player.id }}" id="player_{{ player.id }}" class="form-check-input">
                <label for="player_{{ player.id }}" class="form-check-label fw-bold">{{ player.full_name }}</label>
              </div>
              <div class="mt-2 ps-4 d-flex flex-wrap gap-3 align-items-center">
                <div>
                  <small class="text-muted">2-очки:</small>
                  <input type="number" name="two_pointers_{{ player.id }}" value="0" min="0"
                         class="form-control form-control-sm w-100">
                </div>
                <div>
                  <small class="text-muted">3-очки:</small>
                  <input type="number" name="three_pointers_{{ player.id }}" value="0" min="0"
                         class="form-control form-control-sm w-100">
                </div>
              </div>
            </div>
          </div>
        {% endfor %}
      </div>

      <div class="mt-4 d-flex gap-2">
        <button type="submit" class="btn btn-success">Сохранить</button>
        <a href="{% url 'basketball:basketball_profile' %}" class="btn btn-secondary">Отмена</a>
      </div>
    </form>
  </div>
</div>

<style>
body {
  font-family: Arial, sans-serif;
  background-color: #f8f9fa;
  background-image: url('/static/css/basketbol-naa-spinka.jpg');
  background-size: cover;
  background-position: 80% center;
  background-repeat: no-repeat;
  background-attachment: fixed;
  margin: 0;
  padding: 0;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

.card {
  transition: transform 0.2s ease-in-out;
}
.card:hover {
  transform: scale(1.01);
}
.form-check-label {
  font-size: 1rem;
}
small {
  color: #6c757d;
}

/* Единая высота для всех инпутов */
.form-control, .form-select {
  height: calc(2.5em + 0.5rem);
  padding: 0.375rem 0.75rem;
  border-radius: 0.375rem;
}

/* Для кнопок */
.d-flex.gap-2 {
  display: flex;
  gap: 0.75rem;
}
</style>
{% endblock %}