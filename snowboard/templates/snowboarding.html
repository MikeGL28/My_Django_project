{% extends 'base.html' %}
{% block title %}
–ë–ª–æ–≥ | –°–Ω–æ—É–±–æ—Ä–¥–∏–Ω–≥
{% endblock %}

{% block header %}
    <script src="https://api-maps.yandex.ru/2.1/?apikey=–í–ê–®_API_–ö–õ–Æ–ß_–Ø–ù–î–ï–ö–°&lang=ru_RU" type="text/javascript"></script>
    <style>
        #map { height: 400px; width: 100%; }
    </style>
{% endblock %}

{% block body %}
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f8f9fa;
            background-image: url('/static/css/mount.png');
            background-size: cover;
            background-position: 80% center;
            background-repeat: no-repeat;
            background-attachment: fixed;
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        .post-section {
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.9);
            padding: 10px;
            margin: 20px;
        }

    </style>
<!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –±–µ–ª—ã–º —Ñ–æ–Ω–æ–º -->
<div class="bg-light p-4 rounded shadow-sm mb-4">
  <div class="about-section d-flex flex-wrap align-items-center">
    <!-- –õ–µ–≤–∞—è —á–∞—Å—Ç—å: —Ç–µ–∫—Å—Ç -->
    <div class="about-text col-md-6 col-12">
      <p>
        <strong>–°–Ω–æ—É–±–æ—Ä–¥–∏–Ω–≥ –¥–ª—è –º–µ–Ω—è ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ —Å–ø–æ—Ä—Ç, –∞ –æ–±—Ä–∞–∑ –∂–∏–∑–Ω–∏.</strong><br>
        –≠—Ç–æ —á—É–≤—Å—Ç–≤–æ —Å–≤–æ–±–æ–¥—ã, —Å–∫–æ—Ä–æ—Å—Ç—å, –±–æ—Ä—å–±–∞ —Å —Å–æ–±–æ–π –∏ –µ–¥–∏–Ω–µ–Ω–∏–µ —Å –ø—Ä–∏—Ä–æ–¥–æ–π.
        –ö–∞–∂–¥—ã–π —Å–ø—É—Å–∫ —Å –≥–æ—Ä—ã ‚Äî —ç—Ç–æ –º–∞–ª–µ–Ω—å–∫–æ–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç —Å–µ—Ä–¥—Ü–µ –±–∏—Ç—å—Å—è –±—ã—Å—Ç—Ä–µ–µ.
      </p>

      <p>
        –Ø –Ω–∞—á–∞–ª –∫–∞—Ç–∞—Ç—å—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ –ª–µ—Ç –Ω–∞–∑–∞–¥ –∏ —Å —Ç–µ—Ö –ø–æ—Ä –Ω–µ –º–æ–≥—É –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å –∑–∏–º—É –±–µ–∑ –¥–æ—Å–∫–∏ –∏ —Å–≤–µ–∂–µ–≥–æ —Å–Ω–µ–≥–∞.
        –õ—é–±–ª—é –ø–æ–∫–∞—Ç—É—à–∫–∏ –Ω–∞ —Å–≤–µ–∂–µ–º –≤–æ–∑–¥—É—Ö–µ, –∏—Å—Å–ª–µ–¥—É—é –Ω–æ–≤—ã–µ —Ç—Ä–∞—Å—Å—ã –∏ –º–µ—á—Ç–∞—é –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–µ–±—è –≤ —Ñ—Ä–∏—Å—Ç–∞–π–ª–µ.
      </p>

      <h4>–ú–µ—Å—Ç–∞, –≥–¥–µ —è –∫–∞—Ç–∞–ª—Å—è</h4>
      <p>
        –ù–∞ —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤—ã –Ω–∞–π–¥—ë—Ç–µ –∑–∞–ø–∏—Å–∏ –æ –º–æ–∏—Ö –ø–æ–µ–∑–¥–∫–∞—Ö: –≥–¥–µ —è –±—ã–ª, —á—Ç–æ –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å, —É—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ —Å–∫–ª–æ–Ω–æ–≤ –∏ –ø–æ—á–µ–º—É –∏–º–µ–Ω–Ω–æ —ç—Ç–∞ –≥–æ—Ä–∞ –∑–∞–ø–æ–º–Ω–∏–ª–∞—Å—å.
        –ê –µ—â—ë ‚Äî —Ç–æ—á–Ω—ã–µ –º–µ—Å—Ç–∞ –Ω–∞ –∫–∞—Ä—Ç–µ, —Ç–∞–∫ —á—Ç–æ –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –º–æ–π –º–∞—Ä—à—Ä—É—Ç –∏–ª–∏ –Ω–∞–π—Ç–∏ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ –¥–ª—è —Å–≤–æ–∏—Ö –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–π.
      </p>

      <p class="lead mt-3">
        –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –º–æ–π —Å–Ω–æ—É–±–æ—Ä–¥–∏—á–µ—Å–∫–∏–π –º–∏—Ä üèÇ‚ùÑÔ∏è<br>
        –ó–¥–µ—Å—å –∫–∞–∂–¥—ã–π –ø–æ—Å—Ç ‚Äî —ç—Ç–æ –∫—É—Å–æ—á–µ–∫ –º–æ–µ–π –∏—Å—Ç–æ—Ä–∏–∏ –Ω–∞ —Å–∫–ª–æ–Ω–∞—Ö!
      </p>
    </div>
    <!-- –ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å: —Ñ–æ—Ç–æ -->
    <div class="photo-container col-md-6 col-12 d-flex justify-content-center">
      <img src="/media/snowboard_images/photo_5258289733228950744_y.jpg" alt="–§–æ—Ç–æ —Å–æ —Å–Ω–æ—É–±–æ—Ä–¥–æ–º"
           style="max-width: 100%; border-radius: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.2);">
    </div>
  </div>
</div>
    <div>
        <div id="map"></div>
        <ul>
            {% for post in posts %}
                <li>
                    <div class="post-section">
                        <h2>{{ post.title }}</h2>
                        <div style="display: flex;">
                            <!-- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ª–µ–≤–∞ -->
                            {% if post.image %}
                                <img src="{{ post.image.url }}" alt="{{ post.title }}" style="max-width: 40%; height: auto; margin-right: 16px;">
                            {% endif %}
                            <!-- –¢–µ–∫—Å—Ç–æ–≤—ã–π –±–ª–æ–∫ —Å–ø—Ä–∞–≤–∞ -->
                            <div style="flex: 1;">
                                <p>{{ post.content }}</p>
                                <!-- –ê–¥—Ä–µ—Å –ø–æ—Å–ª–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è -->
                                {% if post.address %}
                                    <p style="margin-top: 8px;">–ú–µ—Å—Ç–æ: {{ post.address }}</p>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </li>
            {% endfor %}
        </ul>
        <hr>
        <a href="{% url 'snowboard:post_create' %}" class="btn btn-success">–î–æ–±–∞–≤–∏—Ç—å –ø–æ—Å—Ç</a>
    </div>

<script>
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞—Ä—Ç—ã –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç
        ymaps.ready(function () {
    var myMap = new ymaps.Map("map", {
        center: [59.9386, 30.3141],
        zoom: 13,
        controls: ['zoomControl', 'fullscreenControl']
    });

    {% for post in posts %}
        {% if post.latitude and post.longitude %}
            try {
                var placemark = new ymaps.Placemark(
                    [{{ post.latitude|floatformat:"1.6f" }}, {{ post.longitude|floatformat:"1.6f" }}], // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ 6 –∑–Ω–∞–∫–æ–≤ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π
                    {
                        balloonContent: "<b>{{ post.title }}</b><br>{{ post.content|truncatewords:10 }}"
                    },
                    {
                        preset: 'islands#blueDotIcon'
                    }
                );
                myMap.geoObjects.add(placemark);
            } catch (error) {
                console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –º–µ—Ç–∫–∏:", error);
            }
        {% else %}
            console.warn("–ü—Ä–æ–ø—É—â–µ–Ω –ø–æ—Å—Ç –±–µ–∑ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç:", "{{ post.title }}");
        {% endif %}
    {% endfor %}
});
</script>
{% endblock %}
